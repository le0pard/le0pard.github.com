---
layout: post
title: Установка Trac+Subversion на Ubuntu или Debian
wordpress_id: 476
wordpress_url: http://leopard.in.ua/?p=476
---
[Trac](http://ru.wikipedia.org/wiki/Trac) — инструмент управления проектами и отслеживания ошибок в программном обеспечении. Trac мы будем ставить 0.11-ой версии.Нам потребуются некоторые библиотеки для установки. Открываем терминал (консоль в Kubuntu) и пишем:<pre lang="bash">sudo apt-get update # обновить репозитарииsudo apt-get install apache2 libapache2-mod-python libapache2-svn python-setuptools subversion python-subversionsudo easy_install Trac</pre>Также можно поставить SQLite (на момент написания статьи последняя версия: 3.5.9), но этот шаг является необязательным. Есть 2 варианта: установка из репозитариев или же компилирование из исходников. Выбирайте какой для вас удобнее.<!--more-->1 способ (репозитарии):<pre lang="bash">sudo apt-get install sqlite</pre>2 способ (исходники):P.S. способ НЕ рекомендуется для использования. Присутствует в ознакомительных целях<pre lang="bash">sudo apt-get install g++cdmkdir ./distrcd ./distrwget http://www.sqlite.org/sqlite-3.5.9.tar.gztar xvfz ./sqlite-3.5.9.tar.gzmv ./sqlite-3.5.9 ./sqlite # чтобы следовать букве README-руководстваmkdir ./bld # временный каталог для скомилированных файловcd ./bld../sqlite/configuremakesudo make installcd ..rm -r ./bld</pre>Создадим дирректорию для Trac и дадим Apache доступ к нему:<pre lang="bash">sudo mkdir /var/lib/tracsudo chown www-data:www-data /var/lib/trac</pre>Настроим VirtualHost для Apache<pre lang="bash">sudo vi /etc/apache2/sites-available/trac (можно использовать gedit (Ubuntu) или kate (Kubuntu) вместо редактора vi)</pre>В открывшийся файл пишем:<pre lang="bash">&lt;VirtualHost *&gt;ServerAdmin webmaster@localhostServerName trac.example.comDocumentRoot /var/wwwErrorLog /var/log/apache2/error.trac.logCustomLog /var/log/apache2/access.trac.log combined&lt;Location /projects&gt;SetHandler mod_pythonPythonInterpreter main_interpreterPythonHandler trac.web.modpython_frontendPythonOption TracEnvParentDir /var/lib/tracPythonOption TracUriRoot /projects&lt;/Location&gt;# use the following for one authorization for all projects (names containing "-" are not detected):&lt;LocationMatch "/projects/[[:alnum:]]+/login"&gt;AuthType BasicAuthName "trac"AuthUserFile /etc/apache2/dav_svn.passwdRequire valid-user&lt;/LocationMatch&gt;&lt;/VirtualHost&gt;</pre>Далее отключаем VirtualHost по умолчанию и активируем VirtualHost Trac, перезагружаем Apache:<pre lang="bash">sudo a2dissite defaultsudo a2ensite tracsudo /etc/init.d/apache2 reload</pre>Переходим в /var/lib, создаем папку для svn, и в ней новую папку для проекта:<pre lang="bash">cd /var/libsudo mkdir svn #необходимы права администратораsudo svnadmin create /var/lib/svn/ProjectName</pre>Изменяем права доступа к папкам, перезапускаем Apache<pre lang="bash">sudo chown -R www-data /var/lib/svnsudo /etc/init.d/apache2 restart</pre>Создаем дирректорию для trac и новый проект с именем ProjectName (Имя то же, что и для svn)<pre lang="bash">sudo trac-admin /var/lib/trac/YourProjectNameHere initenvsudo chown -R www-data /var/lib/trac</pre>Во время создания проекта будут заданы вопросы:<pre lang="bash">ProjectName - имя проектаПуть до SQLite - по умолчаниюРепозиторий - svnПуть до репозитория - /var/lib/svn/ProjectName</pre>Теперь настроим SVN. Файл /etc/apache2/mods-available/dav_svn.conf необходимо раскомментировать, чтобы получилось:<pre lang="bash">sudo vi /etc/apache2/mods-available/dav_svn.conf (вместо vi можно использовать: Ubuntu - gedit, Kubuntu - kate)</pre><pre lang="bash">&lt;Location /svn&gt;DAV svnSVNParentPath /var/lib/svnAuthType BasicAuthName "Subversion Repository"AuthUserFile /etc/apache2/dav_svn.passwdAuthzSVNAccessFile /etc/apache2/dav_svn.authzRequire valid-user&lt;/Location&gt;</pre>Создадим соответствующих пользователей (любое количество, вам необходимое) в файлах авторизации (username - любое имя. Первый пользователь всегда с -c):<pre lang="bash">sudo htpasswd -c /etc/apache2/dav_svn.passwd username1sudo htpasswd /etc/apache2/dav_svn.passwd username2</pre>Создадим файл аутентификации и пишем в него (r - чтение, w - запись):<pre lang="bash">sudo vi /etc/apache2/dav_svn.authz (вместо vi можно использовать: Ubuntu - gedit, Kubuntu - kate)</pre><pre lang="bash">[/]username1=rusername2=rw[/ProjectName]username1=rwusername2=r</pre>Права на доступ Apache файлу /etc/apache2/dav_svn.passwd:<pre lang="bash">sudo chown www-data /etc/apache2/dav_svn.passwd</pre>Добавляем себя в админы Trac (ProjectName - имя проекта, username - имя пользователя)<pre lang="bash">cd /var/lib/tracsudo trac-admin ProjectName permission add username TRAC_ADMIN</pre>Добавляем пару необходимых модулей:<pre lang="bash">sudo mkdir /var/www/.python-eggssudo chown www-data /var/www/.python-eggs</pre><pre lang="bash">sudo apt-get install build-essential graphvizsudo easy_install http://svn.edgewall.org/repos/genshi/trunk/ #установщик задаст вопрос, отвечаем tsudo easy_install http://trac-hacks.org/svn/accountmanagerplugin/trunksudo easy_install http://trac-hacks.org/svn/customfieldadminplugin/0.11sudo easy_install http://trac-hacks.org/svn/eclipsetracplugin/tracrpcext/0.10sudo easy_install http://trac-hacks.org/svn/iniadminplugin/0.11sudo easy_install http://trac-hacks.org/svn/masterticketsplugin/0.11sudo easy_install http://trac-hacks.org/svn/pagetopdfplugin/0.10/sudo easy_install http://trac-hacks.org/svn/progressmetermacro/0.11sudo easy_install http://trac-hacks.org/svn/ticketdeleteplugin/0.11sudo easy_install http://trac-hacks.org/svn/tracwysiwygplugin/0.11sudo easy_install http://wikinotification.ufsoft.org/svn/trunk</pre>Последний шаг - перезагружаем Apache:<pre lang="bash">sudo /etc/init.d/apache2 restart</pre>Теперь по адресу:[http://localhost](http://localhost) - видим "It works!"[http://localhost/svn/ProjectName](http://localhost/svn/ProjectName) - наш svn репозитарий[http://localhost/projects](http://localhost/projects) - список проектов trac
